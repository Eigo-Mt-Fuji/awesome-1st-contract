# ブロックチェーン技術の未解決問題

## 参考情報

- [Ethereum.org - Proof of stake - the consensus mechanism](https://ethereum.org/en/developers/docs/consensus-mechanisms/pos/)
- [Ethereum.org - Layer2](https://ethereum.org/en/layer-2/)
- [Lightning Network - altruist watchtower as a fully-integrated subsystem of lnd](https://github.com/lightningnetwork/lnd/blob/master/docs/watchtower.md)
- [20220720 - 松尾 真一郎 米ジョージタウン大学 - ブロックチェーン技術の未解決問題と、DAOやWeb3.0で新たに生じる問題とは](https://xtech.nikkei.com/atcl/nxt/column/18/02132/071500001/)
- [20220713 - Coindesk JAPAN - DEX大手のdYdXがイーサリアムに別れを告げた理由](https://news.yahoo.co.jp/articles/b7df5e37e18378aa0ffdd92007b330b64ee64153)
- [20211101 - cryptact.com - グローバル仮想通貨規制を徹底解説②（米国規制前編）](https://www.cryptact.com/journal/column-regulation-2)
- [20220222 - hedge.guide - セカンドレイヤーとサイドチェーンは何が違うの？仮想通貨に関する素朴なギモンに答えます](https://hedge.guide/feature/difference-between-second-layer-and-sidechain-bc202202.html)
- [20220721 - マインクラフト「現在はゲームにNFTを導入する計画はない」](https://coinpost.jp/?p=369335)
- [20220721 - マインクラフトのNFT否定方針を受け、関連プロジェクトNFT Worldsの価値が急落](https://coinpost.jp/?p=369441)
- [29210913 - EY、グローバルな税務課題の対処に向けてブロックチェーンベースの官民連携プロジェクトを完遂](https://www.ey.com/ja_jp/news/2021/09/ey-japan-news-release-2021-09-13)
- [20220414 - NRI - 日本銀行が中銀デジタル通貨（CBDC）第1段階実証実験の報告書を公表](https://www.nri.com/jp/knowledge/blog/lst/2022/fis/kiuchi/0414)

## 学んでいく


### ブロックチェーン技術の未解決問題とは?

`とりあえず、https://xtech.nikkei.com/atcl/nxt/column/18/02132/071500001/の内容を読解してみた。`

- 1.暗号技術としての安全性と、システム全体での安全性の検証
  - 安全な形で社会に実装する上で必須の工程
    - 脆弱性やバックドアがないことを調べるために、アカデミアを交えた数学的証明や公開検証が必要
      - (暗号技術の基礎である)暗号アルゴリズム
      - 暗号アルゴリズムと通信を組み合わせてより高機能なセキュリティーやプライバシーを実現する暗号プロトコル（ブロックチェーンもその一種）

- 2.暗号技術を利用したシステムにおける運用の検討
  - 鍵管理
    - 2022年になっても電子署名アルゴリズムの署名鍵の漏洩による数百億円単位の被害が続発している
    - そもそも、鍵管理は人間のオペレーションにも依存する
      - 数学的なアルゴリズムが完璧でも、そのアルゴリズムは人間による安全な鍵管理を前提にしている。
        - 技術革新だけでは解決できない
      - 上に、ビジネスの利益構造や可用性とのトレードオフになる?
  - 暗号技術の危殆（きたい）化 ※当初の安全性が時間経過とともに損なわれる問題
    - 古い暗号アルゴリズムからより安全なアルゴリズムへ移行する方法についていくつかの方式が提案されている
      - エンジニアリングのレベルではまだ議論は進んでいない

- 3. スケーラビリティーと中央集権性とのトレードオフ
  - 一定時間当たりの処理性能のこと）を向上する方法の一例として「Layer 2」と呼ばれる技術
    - ブロックチェーン上の処理（オンチェーン処理と呼ばれる）とブロックチェーン外での処理（オフチェーン処理と呼ばれる）の整合性を確保しつつ、連携して処理をさせる方法
      - Lightning Networkがその例
  - Layer 2においてもともとのブロックチェーンネットワークに比べて分散性を落とさないようにするため、またLayer 2の処理の整合性を担保するために、信頼できるサーバー（Watch Tower）が必要
    - Watch・TowerはビットコインのLightning Network独自の概念と理解した
      - イーサリアムのLayer 2にはWatch towerという概念は存在しない?
        - 概念とは別に実態として見てみると、「複数のノードオペレーターから構成される分散型ネットワークではなく、単独の企業あるいはコンピューターが、レイヤー2チェーンからメインネットへと引き渡される取引をまとめる責任を負っている」、事実c上の中央集権制とも単一障害点とも取れる、実情を抱えている(これはノードの運営の問題もありそう)
　　　　　  - [20220713 - Coindesk JAPAN - DEX大手のdYdXがイーサリアムに別れを告げた理由](https://news.yahoo.co.jp/articles/b7df5e37e18378aa0ffdd92007b330b64ee64153)

- 4. 分散したデータの更新に関する安全性の保証
  - 伝統的に分散コンピューティング分野で研究されている分散合意アルゴリズムの問題
    - グローバルかつパーミッションレス（参加に許可の要らない）なブロックチェーンを構成しようとする場合
      - 実用的ビザンチン故障耐性（Practical Byzantine Fault Tolerance：PBFT）合意アルゴリズムを使うことはできない
      - ビットコインで使われているProof of Work（PoW）アルゴリズムのような確率的な合意にならざるを得ない
        - 電力消費問題を回避できることが売りであるProof of Stake（PoS）
          - そのガバナンスメカニズムから、PoSで発行された暗号資産が有価証券であると判定される可能性がPoWに比べると高くなり得る
            - 資金投資があり、共同出資・事業が有り、収益性が有り、勧誘・第三者の活躍の有る場合、有価証券でみなされるってこと?
              - PoSでは、新規ブロックの検証を行うバリデータの役割を担うが役割があり、バリデータが一定のETHを預け入れることを前提としてる
        　- 仮想通貨と証券法
            - 仮想通貨は以前から有価証券に該当するのか否かの議論がなされている
              - 証券法がどこまで適用されるかが注目されています
                - 直近では、SEC（米証券取引委員会）によるXRPの訴訟が話題になりました
              - 仮想通貨が有価証券に該当すると認められた場合
                - 規制当局の監督下に置かれることで規制が強化される
                  - 規制によりICOがしづらくなったり、現在の仮想通貨取引所での取引が禁止されたりする
                    - 現在の仮想通貨とはまったく異なった経済圏になってしまう可能性
                      - 仮想通貨が有価証券に該当するかどうかを判断するうえで重要になるのが、「Howey テスト」
                        - 仮想通貨の敵：Howey Test
                          - Howeyテストにおいては商品の特性を4つの軸で測る
                            - ４つの条件を満たした商品が「有価証券」に該当
                              - 資金投資の有無／共同出資・事業の有無／収益性の有無／勧誘・第三者の活躍の有無
                            - 仮に投資契約に該当した場合、それは証券登録要件の対象 ※投資契約に該当すること、有価証券に該当すること、証券登録要件の対象であることの３つの違いがわからない。
                                - 4つの軸のうち、「資金投資の有無」「共同出資・事業の有無」については、仮想通貨においてはあまり議論の的にはなってきませんでした
                                  - 仮想通貨でよく議論になるのは、「収益性の有無」と「勧誘・第三者の活躍の有無」
                                    - 収益性の有無
                                      - 収益性（リターン）があるかどうか
                                    - 勧誘・第三者の活躍の有無
                                      - 勧誘や第三者の該当範囲に注目
                                        - 例えばこの第三者に開発者が該当するとなれば、多くのDeFiプロジェクトはこれに該当
                                      - 開発後に世にリリースした時点で、それが勧誘に当たるのではないかという議論
                                        - 「勧誘や第三者の該当範囲」は非常に重要
                      - 証券法に関連する代表的な取締事例
                        - 配当や分配金を約束したICOプロジェクト
                        - 資金調達手段で定期的に売り出しを行ったプロジェクト
                          - リップル（XRP）がSECに提訴されました
                            - リップル社が裁判に負けるとどうなるのか？
                              - リップル社の敗訴は「リップル（XRP）は有価証券である」と断定されたことになり、リップルは仮想通貨ではなくなる
                                - アメリカでリップルを取引できるのは証券取引所のみとなる
                           - この訴訟が最高裁までいけば証券法など制度の見直しにつながる可能性もある
                              - XRPが有価証券に該当するかどうかによって仮想通貨全体の議論が左右されるという見方、XRPが勝訴したところでそれ以外に対する議論は消えないのではないかという意見の両方が存在

                - ちなみに、BTCは、「勧誘・第三者の活躍」に該当せず、匿名の人物が開発し世にリリース、その後も動き続けていることから、「勧誘・第三者の活躍」に該当せずコモディティであるとされているらしい。

### ちなみに、サイドチェーンとセカンドレイヤー(L2)の違いは?

`とりあえず、 https://hedge.guide/feature/difference-between-second-layer-and-sidechain-bc202202.htmlの内容を読解してみた`

- セカンドレイヤー(L2,レイヤー2)とは
  - メインのブロックチェーンと接続された別のレイヤーに存在するネットワークのこと
    - メインのブロックチェーンを補完するスケーリングソリューションの1種
      - セカンドレイヤー(L2,レイヤー2)のチェーンオペレーターを信頼する必要がない=「トラストミニマム運用」を理想とすること
  - 実用化が進められているセカンドレイヤーとしては
    - ビットコインの決済チャネルとして機能する「ライトニングネットワーク（Lightning network）」
    - イーサリアムの「Arbitrum」や「Optimistic」、「Zk Rollup」も有名ですが、現状は実験段階であり、完全なトラストミニマム運用には至っていません。
  - - セカンドレイヤーは取引後の状態情報をメインチェーンに格納するため、メインチェーンのセキュリティを利用

  - レイヤー2の弱点の1つは、レイヤー1ネットワークに戻されるアクティビティを取りまとめるのに、単独のノードオペレーターに依存する
    - 単独の企業あるいはコンピューターが、レイヤー2チェーンからメインネットへと引き渡される取引をまとめる責任を負っている
      - 複数のノードオペレーターから構成される分散型ネットワークではないという問題をかかえていた

- サイドチェーンとは、メインチェーンとは違うブロックチェーンを使ってトランザクションを処理する点でレイヤー2とは異なる技術
  - サイドチェーン
    - 親となるメインブロックチェーン(メインチェーン)とは異なるブロックチェーンを作り
    - メインチェーンとサイドチェーン間で互いに `ペグ` という方法でネットワーク上の資産を結び付ける
    - メインチェーンのコインをサイドチェーンに転送するには
      - メインチェーンのコインをロックする(二重使用を防ぎます)
        - メインチェーンチェーンでロックされている間
          - コインはサイドチェーン内で自由に転送することができます
    - サイドチェーン技術は
      - スケーラビリティ問題を解決するだけでなく
      - ビットコインにスマートコントラクト機能を付加するなどの拡張目的でも開発されています
        - サイドチェーン上で独自の通貨を発行したり、変換した仮想通貨からBTCやETHに戻すといった使い方
  - ビットコインに対するRSKやLiquid、イーサリアムに対するxDAI等
    - Liquidネットワークは、限られた仮想通貨取引所、マーケットメーカー、ブローカーや金融事業者間のみをつなぐコンソーシアム型のブロックチェーン
      - メインチェーンのビットコインと1対1で交換できるビットコインの流動性プールをサイドチェーン上に導入することにより、即時送金を実現
  - サイドチェーンは、セカンドレイヤーよりもユーザからの信頼を必要とする部分が大きくなります
    - メインチェーンとは取引承認者が異なるため、サイドチェーンのセキュリティに依存するので、ユーザーにとってはサイドチェーンオペレーターを信頼する必要(ユーザからサイドチェーンを運用する第三者への信頼を必要)とする。
      - Liquidなど独自のコンセンサスアルゴリズムが存在するケースもある

### NFTの課題

`マインクラフトのNFTに対する説明でも、いくつかの課題が挙げられていた。NFT文脈に限ったものもあるが、中にはブロックチェーン自体への課題感も含まれる。`

- 2022/7/21 人気ゲームのマインクラフト（Minecraft）が「現在はゲームにNFTを導入する計画はない」と発表した。「Minecraft」は Mojang Synergies AB の商標
  - NFTに対する説明として、発表の中でマインクラフトは、NFTについて以下のように説明している。
    - NFTの購入で得られるのは、元のデジタルファイルの所有権を示すトークン
    - NFTのデジタルファイル自体は、コピーされたり、移動したり、削除されることさえもありえます。
    - NFTやブロックチェーンには投機的な側面があり、資産の価値が大きく上下するのを見てきました
    - NFTには信頼性の低いものもあり、値段が高額なものがあるとも指摘
    - NFTの管理者が突然いなくなるリスクもあることなど、現在の課題を挙げている
  - 誰もが安全にプレイできるようにするため、ブロックチェーン技術をマインクラフトのクライアントやサーバーに導入することは禁止
    - スキンなどのゲーム内コンテンツに関連したNFTを作成するために、ブロックチェーン技術を利用することも認めません
  - ゲームでどのように技術を活用できるのか、発展は見守りたい、とした
    - マインクラフトがブロックチェーン技術を利用する計画は今はないとしながらも、ゲームでどのように技術を活用できるのか、発展は見守りたいとした。

## まとめると?

- 「脆弱性やバックドアがないことを調べるために、アカデミアを交えた数学的証明や公開検証が必要」というのはなるほど。適用範囲を拡大しようとした場合、必要になるのだろうと理解した。
- 鍵管理の問題は、継続的に残りそうではあるなと思った。
- スケーラビリティーと中央集権性とのトレードオフについて、Lightning NetworkのWatch Towerを例に説明されているが、イーサリアムのLayer 2で仕組み上起こりうるのか、解決されているのか、この点は曖昧だった(追跡調査したい)
  - 概念とは別に実態として見てみると、「複数のノードオペレーターから構成される分散型ネットワークではなく、単独の企業あるいはコンピューターが、レイヤー2チェーンからメインネットへと引き渡される取引をまとめる責任を負っている」、事実c上の中央集権制とも単一障害点とも取れる、実情を抱えている気配はありそう
　   - [20220713 - Coindesk JAPAN - DEX大手のdYdXがイーサリアムに別れを告げた理由](https://news.yahoo.co.jp/articles/b7df5e37e18378aa0ffdd92007b330b64ee64153)
- マインクラフトがブロックチェーン技術を利用する計画は今はないとしながらも、ゲームでどのように技術を活用できるのか、発展は見守りたいとした。
- 日銀のCDBCの概念実証フェーズ１の報告書では、実証実験によって明らかになった課題など、技術的な側面のみを淡々と記述したものであり、CBDCが発行に近付いているのか否かや、日本銀行がCBDCを発行すべきと考えているのか否かなどの判断は一切記されていない
- 勉強になった！
